#!/bin/bash

export EDITOR=`which nvim || which vim`

# If not running interactively, don't do anything
if [[ -n "$PS1" ]] ; then

  # Source global definitions.
  [[ -s "/etc/bashrc" ]] && source "/etc/bashrc"

  if [[ -d /usr/local/etc/bash_completion.d ]]; then
    for comp_file in /usr/local/etc/bash_completion.d/**
    do
      # AG completion sucks balls, so fuck this.
      if [[ $(basename $comp_file) != 'ag.bashcomp.sh' ]]; then
        source $comp_file
      fi
    done
  fi

  # Source personnal config files.
  for config_file in ~/.dotfiles/**/*.sh
  do
    source $config_file
  done

  # Source local shit.
  [[ -s "$HOME/.bashrc.local" ]] && source "$HOME/.bashrc.local"

  # Put secret configuration settings in ~/.secrets
  [[ -s "$HOME/.secrets" ]] && source "$HOME/.secrets"

  # Set teminal as 256 colors.
  if [ -z $TMUX ]; then
    export TERM='screen-256color'
  fi
fi
